import{g as t,d as a,c as r}from"./branches-D5BKXuc4.js";async function o(e){const n={id:t(),branchId:e.branchId,role:e.role,content:e.content,parentId:e.parentId||null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await a.messages.add(n),n}chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0});chrome.runtime.onMessage.addListener((e,n,d)=>(e.type==="FORK_BRANCH"&&c(e.payload),!0));async function c(e){console.log("Forking at:",e.content);const n=await r({label:e.content?`${e.content.slice(0,15)}...`:"Forked Branch"});await o({branchId:n.id,role:"system",content:"Forked from main thread"}),console.log("Created branch:",n.id),chrome.runtime.sendMessage({type:"REFRESH_BRANCHES"})}
